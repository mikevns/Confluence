<div class="search-filters-panel">
    <div class="search-filter-container first">
        <label class="search-filter-heading" for="search-filter-by-space">
        $action.getText('search.site.filters.title.where')
        </label>

        $soyTemplateRendererHelper.getRenderedTemplateHtml("confluence.web.resources:shared-templates", "Confluence.Templates.Select.spaceSelectVM.soy",{
            "name":"where",
            "id":"search-filter-by-space",
            "isMultiple":false,
            "errorTexts":$action.fieldErrors.get('where'),
            "noSpaceSelector":false,
            "editMode": $editMode,
            "availableGlobalSpace": $availableGlobalSpaces,
            "favouriteSpaces": $favouriteSpaces,
            "aggregateOptions": $aggregateOptions,
            "omitAggregateOptions":false})

        #if ($action.suggestArchivedSpaces)
            <input type="checkbox" value="true" id="search-filter-include-archived" tabindex="224" name="includeArchivedSpaces" #if($action.includeArchivedSpaces)checked#end>
            <label for="search-filter-include-archived">$action.getText("search.site.include.archived")<label>
        #end
    </div>

    <div class="search-filter-container">
        <label class="search-filter-heading" for="search-filter-by-type">
            $action.getText('search.site.filters.title.what')
        </label>

        $soyTemplateRendererHelper.getRenderedTemplateHtml("confluence.web.resources:shared-templates", "Confluence.Templates.Select.auiSelect.soy",{
            "id": "search-filter-by-type",
            "editMode": $editMode,
            "name": "type",
            "listKey": "key",
            "listValue": "value",
            "value": $type,
            "list": $typeOptions
        })
    </div>

    <div class="search-filter-container">
        <label class="search-filter-heading" for="search-filter-by-lastmodified">
            $action.getText('search.site.filters.title.when')
        </label>

        $soyTemplateRendererHelper.getRenderedTemplateHtml("confluence.web.resources:shared-templates", "Confluence.Templates.Select.auiSelect.soy",{
            "id": "search-filter-by-lastmodified",
            "editMode": $editMode,
            "name": "lastModified",
            "listKey": "key",
            "listValue": "value",
            "value": $lastModified,
            "list": $dateRanges
        })
    </div>

    <div class="search-filter-container">
        <label class="search-filter-heading" for="search-filter-by-contributor-autocomplete">
        $action.getText('search.site.filters.title.who')
        </label>
        #fielderror("contributor")
        <input id="search-filter-by-contributor-autocomplete" type="text" class="autocomplete-user text" value="$htmlUtil.htmlEncode($!contributor)"
            tabindex="226" name="contributor" data-alignment="right"
            data-target="#search-filter-by-contributor-hidden" data-none-message="$action.getText('usersearch.no.results')"
            data-resize-to-input="true">
         <div class="search-filter-comment description">$action.getText('search.site.filters.comment.who')</div>

        $soyTemplateRendererHelper.getRenderedTemplateHtml("com.atlassian.auiplugin:aui-experimental-soy-templates", "aui.form.input.soy", {
                                                "type": "hidden",
                                                "id": "search-filter-by-contributor-hidden",
                                                "name": "contributorUsername",
                                                "value": $!contributorUsername,
                                                "extraClasses":"select"})
    </div>
    #ssubmit("name='search-filter-button'" "value='filter.name'" "theme='notable'" "cssClass='aui-button'")
        <a href="${formAction}${queryStringProperty}=$htmlUtil.urlEncode($!queryString)" class="aui-button aui-button-link">
            $action.getText('search.site.filters.reset')</a>
    </div>

#if ($action.relatedLabels.size() > 0)
<div class="search-filters-panel">
	<label class="search-filter-heading" for="search-related-labels">$action.getText("search.browse.related.labels")</label>
	<ul id="search-related-labels">
		#foreach($label in $action.relatedLabels)
		<li>#labelLink($label)</li>
		#end
	</ul>
</div>
#end
