define("confluence/localstorage-cache",["confluence/object-cache","jquery","window"],function(e,j,a){var c=function(d,c){this.cache={};this.cacheStack=[];this.cacheSize=c||30;if(a.localStorage&&!("string"!==typeof d&&0<d.length)){var b="Confluence."+d,f=b+".cache",g=b+".cacheStack",b=a.localStorage.getItem(f),h=a.localStorage.getItem(g),i=this;if(b&&h)try{this.cache=JSON.parse(b),this.cacheStack=JSON.parse(h)}catch(e){this.cache={},this.cacheStack={}}j(a).unload(function(){a.localStorage.setItem(f,
JSON.stringify(i.cache));a.localStorage.setItem(g,JSON.stringify(i.cacheStack))})}};c.prototype=new e;return c});require("confluence/module-exporter").exportModuleAsGlobal("confluence/localstorage-cache","AJS.Confluence.localStorageCacheManager");