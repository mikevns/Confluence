define("confluence/content-hover",["jquery","ajs"],function(e,d){var p={fadeTime:100,hideDelay:500,showDelay:700,loadDelay:50,width:300,mouseMoveThreshold:10,container:"body"};"undefined"===typeof d.followCallbacks&&(d.followCallbacks=[]);"undefined"===typeof d.favouriteCallbacks&&(d.favouriteCallbacks=[]);d.toInit(function(e){e(self).bind("hover-user.follow",function(e,l){for(var g=0,m=d.followCallbacks.length;g<m;g++)d.followCallbacks[g](l.username)})});return function(d,k,l,g,m){var f=e.extend(false,
p,m),j,h,i=function(){var b=e("#content-hover-"+k);if(b.length)j=b.find(".contents");else{e(f.container).append(e('<div id="content-hover-'+k+'" class="ajs-content-hover aui-box-shadow"><div class="contents"></div></div>'));b=e("#content-hover-"+k);j=b.find(".contents");j.css("width",f.width+"px").mouseover(function(){var c=i()[0];clearTimeout(c.hideDelayTimer);b.unbind("mouseover")}).mouseout(function(){n()});j.click(function(b){b.stopPropagation()})}return b},o=function(){var b=i(),c=b[0];if(!b.is(":visible"))c.showTimer=
setTimeout(function(){if(c.contentLoaded&&c.shouldShow){c.beingShown=true;var a=e(window),d=h.x-3,g=h.y+15;d+f.width+30>a.width()?b.css({right:"20px",left:"auto"}):b.css({left:d+"px",right:"auto"});a=(window.pageYOffset||document.documentElement.scrollTop)+a.height();if(g+b.height()>a){g=a-b.height()-5;b.mouseover(function(){var a=i()[0];clearTimeout(a.hideDelayTimer)}).mouseout(function(){n()})}b.css({top:g+"px"});b.fadeIn(f.fadeTime,function(){c.beingShown=false})}},f.showDelay)},n=function(){var b=
i(),c=b[0];c.beingShown=false;c.shouldShow=false;clearTimeout(c.hideDelayTimer);clearTimeout(c.showTimer);clearTimeout(c.loadTimer);c.contentLoading=false;c.shouldLoadContent=false;c.hideDelayTimer=setTimeout(function(){b.fadeOut(f.fadeTime)},f.hideDelay)};d.mousemove(function(b){h={x:b.pageX,y:b.pageY};var c=i(),a=c[0];a.beingShown||clearTimeout(a.showTimer);a.shouldShow=true;if(!a.contentLoaded)if(a.contentLoading){if(a.shouldLoadContent&&(h.x-a.initialMousePosition.x)*(h.x-a.initialMousePosition.x)+
(h.y-a.initialMousePosition.y)*(h.y-a.initialMousePosition.y)>f.mouseMoveThreshold*f.mouseMoveThreshold){a.contentLoading=false;a.shouldLoadContent=false;clearTimeout(a.loadTimer);return}}else{a.initialMousePosition=h;a.shouldLoadContent=true;a.contentLoading=true;a.loadTimer=setTimeout(function(){a.shouldLoadContent&&j.load(l,function(){a.contentLoaded=true;a.contentLoading=false;g.call(c,k);o()})},f.loadDelay)}clearTimeout(a.hideDelayTimer);a.beingShown||o()}).mouseout(function(){n()});e("body").click(function(){var b=
i(),c=b[0];c.beingShown=false;clearTimeout(c.hideDelayTimer);clearTimeout(c.showTimer);b.hide()})}});