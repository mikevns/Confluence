define("confluence/template-renderer",["jquery","ajs","confluence/meta"],function(c,d,l){function f(a){a=new String(a);a.isHtml=!0;return a}function g(a){a=a||document;c("script",a).each(function(){"text/x-template"===this.type&&(e[this.title]=f(this.text))})}function h(a){var b=e[a];b||(b=c('script[title="'+a+'"]',document),0===b.length?b=null:(e[a]=f(b[0].text),b=e[a]));return b}function i(a){return null==a?a:a.isHtml?""+a:(""+a).replace(/[&<>'"]/g,function(a){return m[a]||a})}function n(a){var b=
arguments;return a.replace(/\{(\d+)\}/g,function(a,c){var d=b[parseInt(c,10)+1];return null!=d?d:a})}function k(a,b){var j=l.get("static-resource-url-prefix");0!==a.indexOf("http")&&0!==a.indexOf(j)&&(a=j+a);c.ajax({url:a,data:{locale:d.params.userLocale},dataType:"html",success:function(a){a=c("<div></div>").append(a);g(a);b&&b()}})}var e={},m={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"};return{renderTemplate:function(a,b){if(!h(a))return"";c.isArray(b)||(b=Array.prototype.slice.call(arguments,
1));for(var d=[h(a).toString()],e=0;e<b.length;e++)d.push(i(b[e]));return n.apply(this,d)},loadTemplatesFromUrl:k,loadWebResourceTemplates:function(a,b,c){return k("/download/resources/"+a+"/"+b,c)},escapeEntities:i,getTemplate:h,loadTemplateScripts:g,html:f,init:function(){g()}}});
require("confluence/module-exporter").safeRequire("confluence/template-renderer",function(c){var d=require("ajs");d.renderTemplate=c.renderTemplate;d.loadTemplatesFromUrl=c.loadTemplatesFromUrl;d.loadWebResourceTemplates=c.loadWebResourceTemplates;d.escapeEntities=c.escapeEntities;d.getTemplate=c.getTemplate;d.loadTemplateScripts=c.loadTemplateScripts;d.html=c.html;d.toInit(c.init)});