define("confluence/page-history",["jquery","ajs"],function(c,a){return function(){c("#page-history-container").click(function(a){if(!c(a.target).is("a")&&!c(a.target).hasClass("userLogo")&&!c(a.target).hasClass("additional-contributors-button")){var b=c(a.target).closest("tr"),d=b.find("input")[0];d&&(a.target!==d&&(d.checked=!d.checked),d.checked?2>=c("input:checked",this).length?b.addClass("page-history-item-selected"):d.checked=!1:b.removeClass("page-history-item-selected"))}});c(".remove-historical-version-trigger").click(function(){var e=
c(this),b;b=new a.Dialog({width:400,height:236,id:"remove-historical-version-dialog",closeOnOutsideClick:!1,keypressListener:function(a){b&&27===a.keyCode&&b.remove()}});b.addHeader(a.I18n.getText("remove.historical.version.confirm.remove.title"));b.addPanel("SinglePanel","<div>"+a.I18n.getText("remove.historical.version.confirm.remove.description",e.data("version"),a.escapeHtml(a.Meta.get("page-title")))+"</div>");b.addButton(a.I18n.getText("remove.name"),function(){c(this).prop("disabled",!0);c.ajax({type:"GET",
url:a.contextPath()+"/rest/api/accessmode",contentType:"application/json",dataType:"json"}).done(function(d){"READ_WRITE"===d?(c("#remove-historical-version-pageid").val(e.data("pageid")),c("#remove-historical-version-form").submit()):(d=a.messages.error({body:a.I18n.getText("read.only.mode.default.error.short.message"),closeable:!1}),b.getCurrentPanel().html(d))})});b.addCancel(a.I18n.getText("close.name"),function(){b.remove();return!1});b.gotoPanel(0);b.show();return!1})}});
require("confluence/module-exporter").safeRequire("confluence/page-history",function(c){require("ajs").toInit(c)});