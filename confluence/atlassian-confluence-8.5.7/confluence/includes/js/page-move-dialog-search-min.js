define("confluence/page-move-dialog-search",["jquery","ajs","confluence/templates"],function(c,d,j){return function(b){var k=c("#confluence-context-path").attr("content"),a=this,f=c("input[type=button]",a),e=c("input.search-query",a),i=c(".search-space",a),g=c(".search-results",a);c([i[0],e[0]]).keydown(function(c){13===c.which&&f.click()});c([e[0],g[0]]).keydown(function(b){function d(b){var h=c(".search-result",a),l=c(".search-result.selected",a),b=h.index(l)+b;0>b&&(b=h.length-1);b>=h.length&&
(b=0);h.eq(b).click()}38===b.which?d(-1):40===b.which&&d(1)});f.click(function(){b.clearErrors();var a=e.val();""==a?g.empty():(g.html(j.MovePage.searchResultsLoading()),c.ajax({type:"GET",dataType:"json",data:{queryString:a,where:i.val(),types:["spacedesc","personalspacedesc","page"]},url:k+"/json/search.action",error:function(){b.error(d.I18n.getText("move.page.dialog.search.error"))},success:function(e,f){"success"!=f?b.error(d.I18n.getText("move.page.dialog.search.error")):g.searchResultsGrid(a,
e,c(b).extend({select:function(c,a){"page"==a.type?b.select(a.spaceKey,a.spaceName,a.title,a.id):b.select(a.spaceKey,a.spaceName)}}),{noSearchResults:d.I18n.getText("move.page.dialog.search.no.results"),resultsCount:d.I18n.getText("move.page.dialog.search.results.count")})}}))})}});require("confluence/module-exporter").exportModuleAsGlobal("confluence/page-move-dialog-search","jQuery.fn.movePageSearch");