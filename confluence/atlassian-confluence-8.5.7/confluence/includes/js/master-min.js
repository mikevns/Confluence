define("confluence/master",["confluence/effects","ajs","confluence/legacy","jquery"],function(a,b,d,e){var g={init:function(b){b("#messageContainer").find(".confluence-messages").each(function(){var c=this;a.getCookie(c.id)||(b(c).show(),b(".message-close-button",c).click(function(){b(c).slideUp();a.setCookie(c.id,!0)}))})},domready1:function(){var f={};b.I18n={keys:{},get:function(c,h,j){var a=!0,i=b.contextPath()+"/rest/prototype/1/i18n",d={locale:b.params.userLocale};if(e.isArray(c)){for(var g in c)f[g]||
(a=!1);d.pluginKeys=c}else a=f[c],i+="/"+c;a?"function"===typeof h&&h(b.I18n.keys):e.ajax({url:i,data:d,dataType:"json",success:function(a){b.I18n.load(a);f[c]=!0;"function"===typeof h&&h(a)},error:function(h,a){b.log("Error loading I18n for "+c+":"+a);"function"===typeof j&&j(a)}})},load:function(c){e.extend(b.I18n.keys,c)},getText:function(c,a){var f=b.params["i18n."+c]||b.I18n.keys[c]||c;if(!a)return f;2===arguments.length&&a instanceof Array?a.unshift(f):(a=Array.prototype.slice.call(arguments,
0),a[0]=f);return b.format.apply(b,a)}}},domready2:function(){b.trim=b.trim||function(a){return!a?"":a.trim()}}};g.General={getContextPath:d.getContextPath,getBaseUrl:d.getBaseUrl};g.selectableEffects=function(a,c,b){var d=e(this);b&&d.data("properties",b);d.click(function(b){var d=e(this);c&&c(this,d.data("properties"));a.find(".selected").removeClass("selected");d.addClass("selected");b.stopPropagation();return!1});d.hover(function(){e(this).addClass("hover")},function(){e(this).removeClass("hover")})};
g.shortenUntil=function(a){for(var c=0;!a()&&c<this.length;){var b=e(this[c]).text();"…"===b?c++:e(this[c]).text(b.replace(/[^\u2026]\u2026?$/,"…"))}return this};return g});require("confluence/module-exporter").safeRequire("confluence/master",function(a){var b=require("ajs"),d=require("jquery");b.toInit(a.init);b.General=a.General;a.domready1();a.domready2();d.fn.selectableEffects=a.selectableEffects;d.fn.shortenUntil=a.shortenUntil});