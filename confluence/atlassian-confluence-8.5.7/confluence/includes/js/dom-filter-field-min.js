define("confluence/dom-filter-field",["ajs","confluence/legacy","jquery"],function(h,k,e){return function(c){function i(){f=e(c.items)}function g(){return e.trim(b.filter(":not(.blank-search)").val())}function j(){c.searcher(f,g());c.postSearch(f.filter(":visible"))}var d={items:null,matcher:function(a,c){return-1<a.text().toLowerCase().indexOf(c)},searcher:function(a,b){""!==b?(b=b.toLowerCase(),a.each(function(){var a=e(this),d=c.matcher(a,b);a.toggleClass("hidden",!d)})):a.removeClass("hidden")},
postSearch:function(){},placeholderText:h.I18n.getText("macro.browser.searchmacros"),ariaLabelText:h.I18n.getText("macro.browser.searchmacros"),submitCallback:function(a,b){h.debug("Confluence.DomFilterField submitted with "+a.length+" item(s) for search text >"+b+"<")}},c=e.extend(d,c),f;i();var d=e(k.Templates.DomFilterField.form()),b=d.find("input");b.attr("placeholder",c.placeholderText);b.attr("aria-label",c.ariaLabelText);b.keyup(function(a){j();a.stopPropagation();return!1}).keyup(function(a){a.stopPropagation();
return!1}).focus(function(a){b.hasClass("blank-search")&&b.removeClass("blank-search");a.target.select()}).blur(function(){""===g()&&b.addClass("blank-search")}).blur();c.formId&&d.attr("id",c.formId);c.inputId&&b.attr("id",c.inputId);d.submit(function(a){a.stopPropagation();a=f.filter(":visible");a.length&&c.submitCallback(a,g());return!1});return{form:d,reset:function(){""!==g()&&(b.val("").blur(),c.searcher(f,""))},refreshItems:i,filter:j,focus:function(){b.focus()},focusAndSearch:function(a){a=
e.trim(a);b.val(a).keyup();a&&b.removeClass("blank-search");b.focus()}}}});require("confluence/module-exporter").exportModuleAsGlobal("confluence/dom-filter-field","Confluence.DomFilterField");