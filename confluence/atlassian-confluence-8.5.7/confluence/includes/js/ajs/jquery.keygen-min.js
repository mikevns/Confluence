(function(n,f){n.KeyGenerator=function(){var k="THE A AN AS AND OF OR".split(" "),l={199:"C",231:"c",252:"u",251:"u",250:"u",249:"u",233:"e",234:"e",235:"e",232:"e",226:"a",228:"a",224:"a",229:"a",225:"a",239:"i",238:"i",236:"i",237:"i",196:"A",197:"A",201:"E",230:"ae",198:"Ae",244:"o",246:"o",242:"o",243:"o",220:"U",255:"Y",214:"O",241:"n",209:"N"};return{generateKey:function(c,e){var e=f.extend({},e),a="number"===typeof e.desiredKeyLength?e.desiredKeyLength:4,h="number"===typeof e.maxKeyLength?
e.maxKeyLength:Infinity,j="undefined"!==typeof e.charBlacklistRegex?e.charBlacklistRegex:/[^a-zA-Z0-9]/g,c=f.trim(c);if(!c)return"";for(var d=[],b=0,i=c.length;b<i;b++){var o=l[c.charCodeAt(b)];d.push(o?o:c[b])}var c=d.join(""),g=[];f.each(c.split(/\s+/),function(b,a){a&&(a=a.replace(j,""),a=a.toUpperCase(),a.length&&g.push(a))});a&&g.join("").length>a&&(g=f.grep(g,function(a){return-1===f.inArray(a,k)}));if(0===g.length)a="";else if(1===g.length){d=g[0];a:{b=!1;for(i=0;i<d.length;i++)if(d[i]&&1===
d[i].length&&-1!==d[i].search("[AEIOUY]"))b=!0;else if(b){b=d.substring(0,i+1);break a}b=d}a=h<d.length||Math.abs(d.length-a)>=Math.abs(b.length-a)?b:d}else{var d=g.join("").length,m="";f.each(g,function(a,b){m+=b.charAt(0)});b=m;a=h<d||Math.abs(d-a)>=Math.abs(b.length-a)?b:g.join("")}h&&a.length>h&&(a=a.substr(0,h));return a}}};var p=n.KeyGenerator();f.fn.generateFrom=function(k,l){var c=f(this).first(),e=k.first(),a=f.extend({},{desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,
charBlacklistRegex:/[^a-zA-Z0-9]/g,uppercase:!0,validationCallback:function(){},errorCallback:function(){}},l),h=function(){var b=c.val();b?c.data("lastGeneratedValue")!==b&&c.data("autosuggest",!1):c.data("autosuggest",!0);if(!1!==c.data("autosuggest")){var b=p.generateKey(e.val(),{desiredKeyLength:a.desiredKeyLength,maxKeyLength:a.maxKeyLength,charBlacklistRegex:a.charBlacklistRegex}),d=c.val();c.data("lastGeneratedValue",b);c.val(b);d!=b&&a.validationCallback()}},j=function(b){var c=f(b.target),
e;e=function(){d(b);h();c.is(":visible")&&c.data("checkHook",setTimeout(e,a.timeoutMS))};c.data("checkHook")||c.data("checkHook",setTimeout(e,0))},d=function(a){h();a=f(a.target);clearTimeout(a.data("checkHook"));a.removeData("checkHook")};e.attr("maxlength",a.maxNameLength);c.attr("maxlength",a.maxKeyLength);a.uppercase&&c.css("text-transform","uppercase");document.activeElement&&document.activeElement===e[0]&&j({target:e[0]});e.focus(j);e.blur(d);return this}})(window,jQuery);