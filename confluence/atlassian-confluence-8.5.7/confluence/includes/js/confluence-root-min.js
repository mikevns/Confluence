define("confluence/root","ajs confluence-rest/confluence-rest confluence/api/logger confluence/meta jquery window".split(" "),function(b,h,i,f,g,j){var e={getContextPath:function(){return f.get("context-path")},getBaseUrl:function(){return g("#confluence-base-url").attr("content")||""},getBuildNumber:function(){return f.get("build-number")},getContentId:function(){var a=f.get("content-id");+a||(a=f.get("page-id"));+a||(a="0");return a},getXsrfToken:function(){return f.get("atl-token")},runBinderComponents:function(){for(var a in e.Binder)if(e.Binder.hasOwnProperty(a))try{e.Binder[a]()}catch(c){i.logError("Exception in initialising of component '"+
a+"': "+c.message)}},placeFocus:function(){e.Binder.placeFocus()},unescapeEntities:function(a){var c={amp:"&",lt:"<",gt:">","#39":"'",quot:'"'};return a==null?a:(""+a).replace(/&[#\d\w]+;/g,function(a){var b=a.substring(1,a.length-1);return c[b]||a})},sessionCheck:function(a,c){var d=f.get("remote-user");if(d){var b=this.getContextPath()+h.REST.getBaseUrl()+"session/check/"+d,e=this;return g.getJSON(b).done(function(){i.debug("SESSION CHECK - OK - "+d)}).fail(function(){i.log("SESSION CHECK - FAIL - "+
d);e.sessionFail(a,c)})}},sessionFail:function(a,c){if(!a){var d=g(".aui-dialog:visible");if(d.length){a=d.find(".dialog-panel-body").empty();d.find(".aui-button").attr("disabled","disabled")}else throw Error("sessionFail method really expected a visible dialog about now :/");}if(!c){c=b.I18n.getText("user.session.timed.out",'<a class="reload" href="">',"</a>");a.on("click","a.reload",function(){j.location.reload()})}b.messages.warning(a,{body:c,closeable:false,shadowed:true})},Binder:{placeFocus:function(){var a,
c=-1;g("input[data-focus]").each(function(){var d=g(this),b=d.attr("data-focus");if(b>c){c=b;a=d}});a&&a.focus()}},hintManager:function(a){if(!g.isArray(a))throw Error("Hints passed in must be an array of strings");var c=Math.floor(Math.random()*a.length);return{getNextHint:function(){var b=a[c];c=(c+1)%a.length;return b}}},debugTime:function(a){if(b.debugEnabled()&&console.time){console.log(a+" started");console.time(a)}},debugTimeEnd:function(a){b.debugEnabled()&&console.timeEnd&&console.timeEnd(a)}};
return e});require("confluence/module-exporter").exportModuleAsGlobal("confluence/root","Confluence",function(b){var h=require("ajs");h.toInit(function(){b.runBinderComponents()});h.Confluence=b});