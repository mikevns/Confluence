<html>
	<head>
		<title>$action.getText("title.set.user.pass") #if ($username): $username #end</title>
	</head>

	<body>
        #parse ( "/template/includes/actionerrors.vm" )

        #applyDecorator("form-aui")
            #decoratorParam("formName" "setPassword")
            #decoratorParam("submitAction"  "dosetuserpassword.action?username=$!generalUtil.doubleUrlEncode($user.name)")
            #decoratorParam("formStyle" "long-label")
            #decoratorParam("editMode" "true")

            #form_xsrfToken()

            #set ($templateParameters = {
                "id": "newPassword",
                "labelContent": "$i18n.getText('new.pass.name')",
                "name": "newPassword",
                "value": $!newPassword,
                "errorTexts": $!fieldErrors.get('newPassword')})
            $soyTemplateRendererHelper.getRenderedTemplateHtml("com.atlassian.auiplugin:aui-experimental-soy-templates", "aui.form.passwordField.soy", $templateParameters)
            #set ($templateParameters = {
                "id": "newPasswordConfirmation",
                "labelContent": "$i18n.getText('new.pass.confirm.name')",
                "name": "newPasswordConfirmation",
                "value": $!newPasswordConfirmation,
                "errorTexts": $!fieldErrors.get('newPasswordConfirmation')})
            $soyTemplateRendererHelper.getRenderedTemplateHtml("com.atlassian.auiplugin:aui-experimental-soy-templates", "aui.form.passwordField.soy", $templateParameters)

            #ssubmit("value='update.name'" "theme='aui'"
                     "editMode=true"
                     "submitValue=$action.getText('save.name')")
        #end

		#parse ( "/breadcrumbs.vm" )
	</body>
</html>
