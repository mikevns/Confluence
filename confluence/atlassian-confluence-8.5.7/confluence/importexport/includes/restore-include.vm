#* @vtlvariable name="action" type="com.atlassian.confluence.importexport.actions.AbstractBackupRestoreAction" *#
#**
 * Before including this file please specify:
 * $upload-and-restore-form-action
 * $restore-local-file-form-action
 *#
#parse ("/setup/setup-button.vm")
<form method="POST" name="uploadexportform" class="aui max-width"
      action="$upload-and-restore-form-action?synchronous=$synchronous" enctype="multipart/form-data">
    #form_xsrfToken()
    <h3>$action.getText("upload.zipped.backup")</h3>
    <p><span class="stepdesc">$action.getText("if.your.export.file.is.small")</span></p>
    <div class="group">
        <div class="checkbox" resolved="">
            <input type="checkbox" class="checkbox" value="true" name="buildIndex" checked="checked" id="buildIndex"
                   resolved=""><span class="aui-form-glyph"></span>
            <label for="buildIndex">$i18n.getText('build.index')</label>
            <div class="description">$i18n.getText('build.index.description')</div>
        </div>
    </div>
    <div class="field-group">
        <input type="file" name="file" class="upfile">
    </div>
    <div class="field-group">
        #setupSubmitButton("edit", "edit", "$action.getText('upload.and.restore')", "setup-restore-button", false)
    </div>
</form>

<form action="$restore-local-file-form-action" class="aui max-width" method="POST" name="restorelocalfileform">
    #form_xsrfToken()
    <h3>$action.getText("restore.from.file.system")</h3>
    <p><span class="stepdesc">$action.getText("recomended.if.large.backup", ["<code>$bootstrap.applicationHome${systemFileSeparator}restore</code>"])</span></p>
    <div class="group">
        <div class="checkbox" resolved="">
            <input type="checkbox" class="checkbox" value="true" name="buildIndexLocalFileRestore" checked="checked" id="buildIndexLocalFileRestore"
                   resolved=""><span class="aui-form-glyph"></span>
            <label for="buildIndexLocalFileRestore">$i18n.getText('build.index')</label>
            <div class="description">$i18n.getText('build.index.description')</div>
        </div>
    </div>
    <div class="field-group">
        <select name="localFileName" size="5" class="multi-select">
            #if ($action.getFilesInRestoreFolder().isEmpty())
                <option value="">$action.getText("no.files.in.dir")</option>
            #else
                #foreach ($eachFilename in $action.getFilenames())
                    <option value="$eachFilename">$eachFilename</option>
                #end
            #end
        </select>
        #if ($action.getFilesInRestoreFolder().isEmpty())
            <div class="description">$action.getText("currently.no.files.in.dir", ["<code>restore</code>"])</div>
        #end
    </div>
    <div class="field-group">
        #setupSubmitButton("edit", "edit", "$action.getText('restore.word')", "setup-restore-button", false)
    </div>
</form>
